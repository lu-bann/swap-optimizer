<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="syn-solidity"><title>syn_solidity - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-9bb858ba049f1f21.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="syn_solidity" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.0 (5680fa18f 2023-08-23)" data-channel="1.72.0" data-search-js="search-f6292fe389d70017.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ><script src="../static.files/storage-59fd9b8ccb335783.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/alloy-rs/core/main/assets/alloy.jpg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../syn_solidity/index.html"><img src="https://raw.githubusercontent.com/alloy-rs/core/main/assets/alloy.jpg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../syn_solidity/index.html"><img src="https://raw.githubusercontent.com/alloy-rs/core/main/assets/alloy.jpg" alt="logo"></a><h2 class="location"><a href="#">Crate syn_solidity</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.2.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">syn_solidity</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/syn_solidity/lib.rs.html#1-76">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="syn-solidity"><a href="#syn-solidity">syn-solidity</a></h2>
<p><a href="https://github.com/dtolnay/syn"><code>syn</code></a>-powered parser for Solidity-like <a href="https://doc.rust-lang.org/proc_macro/struct.TokenStream.html"><code>TokenStream</code></a>s.</p>
<p>The parsed root element is the <a href="struct.File.html" title="struct syn_solidity::File"><code>File</code></a>, which contains a list of <a href="enum.Item.html" title="enum syn_solidity::Item"><code>Item</code></a>s.
<a href="enum.Item.html" title="enum syn_solidity::Item"><code>Item</code></a>s also support outer attributes, as shown below.</p>
<p><strong>⚠️ Work in progress ⚠️</strong></p>
<h3 id="design"><a href="#design">Design</a></h3>
<p>This parser is specifically designed for Rust procedural macros. It aims to
mimic the behavior of the official Solidity compiler (Solc) when it comes to
parsing valid Solidity code. This means that all valid Solidity code, as
recognized by Solc v0.5.*<sup id="fnref1"><a href="#fn1">1</a></sup> and above, will also be recognized and parsed
correctly by <code>syn-solidity</code>.</p>
<p>However, <code>syn-solidity</code> is more permissive and lenient compared to the official
Solidity compiler and grammar specifications. Some examples of code patterns
that are valid in <code>syn-solidity</code> but not in the official compiler include:</p>
<ul>
<li>identifiers are Rust identifiers (<code>syn::Ident</code>), and as such cannot contain
the dollar sign (<code>$</code>), but can contain unicode characters</li>
<li>trailing punctuation, like commas (<code>,</code>) in function arguments or enums
definitions</li>
<li>certain variable and function attributes in certain contexts, like <code>internal</code>
functions or functions with implementations (<code>{ ... }</code>) in interfaces</li>
<li>parameter storage locations in item definitions, like <code>uint256[] memory</code> in
a struct or error definition</li>
<li>the tuple type <code>(T, U, ..)</code> is allowed wherever a type is expected, and can
optionally be preceded by the <code>tuple</code> keyword.
This is the same as <a href="https://docs.ethers.org/v5/api/utils/abi/formats/#abi-formats--human-readable-abi"><code>ethers.js</code>’s Human-Readable ABI</a></li>
</ul>
<p>This lenient behavior is intentionally designed to facilitate usage within
procedural macros, and to reduce general code complexity in the parser and AST.</p>
<h3 id="example"><a href="#example">Example</a></h3>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">use </span>quote::quote;
<span class="kw">use </span>syn_solidity::{File, Item};

<span class="comment">// Create a Solidity `TokenStream`
</span><span class="kw">let </span>tokens = <span class="macro">quote! </span>{
    <span class="doccomment">/// @name HelloWorld
    /// @notice A hello world example in Solidity.
    </span>contract HelloWorld {
        <span class="doccomment">/// @notice Returns the string &quot;Hello, World!&quot;.
        </span>function helloWorld() external pure returns (string memory) {
            <span class="kw">return </span><span class="string">&quot;Hello, World!&quot;</span>;
        }
    }
};

<span class="comment">// Parse the tokens into a `File`
</span><span class="kw">let </span>ast: File = syn_solidity::parse2(tokens)<span class="question-mark">?</span>;

<span class="kw">let </span>items: <span class="kw-2">&amp;</span>[Item] = <span class="kw-2">&amp;</span>ast.items;
<span class="kw">let </span><span class="prelude-val">Some</span>(Item::Contract(contract)) = items.first() <span class="kw">else </span>{ <span class="macro">unreachable!</span>() };
<span class="macro">assert_eq!</span>(contract.name, <span class="string">&quot;HelloWorld&quot;</span>);
<span class="macro">assert_eq!</span>(contract.attrs.len(), <span class="number">2</span>);

<span class="kw">let </span>body: <span class="kw-2">&amp;</span>[Item] = <span class="kw-2">&amp;</span>contract.body;
<span class="kw">let </span><span class="prelude-val">Some</span>(Item::Function(function)) = items.first() <span class="kw">else </span>{ <span class="macro">unreachable!</span>() };
<span class="macro">assert_eq!</span>(function.attrs.len(), <span class="number">1</span>);
<span class="macro">assert_eq!</span>(function.name, <span class="string">&quot;helloWorld&quot;</span>);
<span class="macro">assert!</span>(function.arguments.is_empty());
<span class="macro">assert_eq!</span>(function.attributes.len(), <span class="number">3</span>);
</code></pre></div>
<div class="footnotes"><hr><ol><li id="fn1"><p>Older versions may still parse successfully, but this is not guaranteed.&nbsp;<a href="#fnref1">↩</a></p></li></ol></div></div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.Visit"><code>pub use visit::<a class="trait" href="visit/trait.Visit.html" title="trait syn_solidity::visit::Visit">Visit</a>;</code></div></li><li><div class="item-name" id="reexport.VisitMut"><code>pub use visit_mut::<a class="trait" href="visit_mut/trait.VisitMut.html" title="trait syn_solidity::visit_mut::VisitMut">VisitMut</a>;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="kw/index.html" title="mod syn_solidity::kw">kw</a></div><div class="desc docblock-short">Solidity keywords.</div></li><li><div class="item-name"><a class="mod" href="visit/index.html" title="mod syn_solidity::visit">visit</a></div><div class="desc docblock-short">Syntax tree traversal to walk a shared borrow of a syntax tree.</div></li><li><div class="item-name"><a class="mod" href="visit_mut/index.html" title="mod syn_solidity::visit_mut">visit_mut</a></div><div class="desc docblock-short">Syntax tree traversal to mutate an exclusive borrow of a syntax tree in
place.</div></li></ul><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.sol_path.html" title="macro syn_solidity::sol_path">sol_path</a></div><div class="desc docblock-short">Create a <a href="struct.SolPath.html" title="struct syn_solidity::SolPath"><code>SolPath</code></a> from a list of identifiers.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Block.html" title="struct syn_solidity::Block">Block</a></div><div class="desc docblock-short">A curly-braced block of statements.</div></li><li><div class="item-name"><a class="struct" href="struct.EventParameter.html" title="struct syn_solidity::EventParameter">EventParameter</a></div><div class="desc docblock-short">An event parameter.</div></li><li><div class="item-name"><a class="struct" href="struct.File.html" title="struct syn_solidity::File">File</a></div><div class="desc docblock-short">A Solidity file. The root of the AST.</div></li><li><div class="item-name"><a class="struct" href="struct.FunctionAttributes.html" title="struct syn_solidity::FunctionAttributes">FunctionAttributes</a></div><div class="desc docblock-short">A list of unique function attributes. Used in
<a href="struct.ItemFunction.html" title="struct syn_solidity::ItemFunction">ItemFunction</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ImportAlias.html" title="struct syn_solidity::ImportAlias">ImportAlias</a></div><div class="desc docblock-short">An import alias.</div></li><li><div class="item-name"><a class="struct" href="struct.ImportAliases.html" title="struct syn_solidity::ImportAliases">ImportAliases</a></div><div class="desc docblock-short">A list of import aliases: <code>import { Foo as Bar, Baz } from &quot;foo.sol&quot;;</code></div></li><li><div class="item-name"><a class="struct" href="struct.ImportDirective.html" title="struct syn_solidity::ImportDirective">ImportDirective</a></div><div class="desc docblock-short">An import directive: <code>import &quot;foo.sol&quot;;</code></div></li><li><div class="item-name"><a class="struct" href="struct.ImportGlob.html" title="struct syn_solidity::ImportGlob">ImportGlob</a></div><div class="desc docblock-short">A glob import directive: <code>import * as Foo from &quot;foo.sol&quot;;</code></div></li><li><div class="item-name"><a class="struct" href="struct.ImportPlain.html" title="struct syn_solidity::ImportPlain">ImportPlain</a></div><div class="desc docblock-short">A plain import directive: <code>import &quot;foo.sol&quot; as Foo;</code></div></li><li><div class="item-name"><a class="struct" href="struct.ItemContract.html" title="struct syn_solidity::ItemContract">ItemContract</a></div><div class="desc docblock-short">A contract, abstract contract, interface, or library definition:
<code>contract Foo is Bar(&quot;foo&quot;), Baz { ... }</code></div></li><li><div class="item-name"><a class="struct" href="struct.ItemEnum.html" title="struct syn_solidity::ItemEnum">ItemEnum</a></div><div class="desc docblock-short">An enum definition: <code>enum Foo { A, B, C }</code></div></li><li><div class="item-name"><a class="struct" href="struct.ItemError.html" title="struct syn_solidity::ItemError">ItemError</a></div><div class="desc docblock-short">An error definition: <code>error Foo(uint256 a, uint256 b);</code></div></li><li><div class="item-name"><a class="struct" href="struct.ItemEvent.html" title="struct syn_solidity::ItemEvent">ItemEvent</a></div></li><li><div class="item-name"><a class="struct" href="struct.ItemFunction.html" title="struct syn_solidity::ItemFunction">ItemFunction</a></div><div class="desc docblock-short">A function, constructor, fallback, receive, or modifier definition:
<code>function helloWorld() external pure returns(string memory);</code></div></li><li><div class="item-name"><a class="struct" href="struct.ItemStruct.html" title="struct syn_solidity::ItemStruct">ItemStruct</a></div><div class="desc docblock-short">A struct definition: <code>struct Foo { uint256 bar; }</code></div></li><li><div class="item-name"><a class="struct" href="struct.ItemUdt.html" title="struct syn_solidity::ItemUdt">ItemUdt</a></div><div class="desc docblock-short">A user-defined value type definition: <code>type Foo is uint256;</code></div></li><li><div class="item-name"><a class="struct" href="struct.LitStr.html" title="struct syn_solidity::LitStr">LitStr</a></div><div class="desc docblock-short">A string literal.</div></li><li><div class="item-name"><a class="struct" href="struct.Modifier.html" title="struct syn_solidity::Modifier">Modifier</a></div><div class="desc docblock-short">A modifier invocation, or an inheritance specifier.</div></li><li><div class="item-name"><a class="struct" href="struct.Override.html" title="struct syn_solidity::Override">Override</a></div><div class="desc docblock-short">The <code>override</code> attribute.</div></li><li><div class="item-name"><a class="struct" href="struct.Parameters.html" title="struct syn_solidity::Parameters">Parameters</a></div><div class="desc docblock-short">A list of <a href="struct.VariableDeclaration.html" title="struct syn_solidity::VariableDeclaration">VariableDeclaration</a>s, separated by <code>P</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.PragmaDirective.html" title="struct syn_solidity::PragmaDirective">PragmaDirective</a></div><div class="desc docblock-short">A pragma directive: <code>pragma solidity ^0.8.0;</code></div></li><li><div class="item-name"><a class="struct" href="struct.Returns.html" title="struct syn_solidity::Returns">Returns</a></div><div class="desc docblock-short">The <code>returns</code> attribute of a function.</div></li><li><div class="item-name"><a class="struct" href="struct.SolIdent.html" title="struct syn_solidity::SolIdent">SolIdent</a></div><div class="desc docblock-short">A Solidity identifier.</div></li><li><div class="item-name"><a class="struct" href="struct.SolPath.html" title="struct syn_solidity::SolPath">SolPath</a></div><div class="desc docblock-short">A list of identifiers, separated by dots.</div></li><li><div class="item-name"><a class="struct" href="struct.TypeArray.html" title="struct syn_solidity::TypeArray">TypeArray</a></div><div class="desc docblock-short">An array type.</div></li><li><div class="item-name"><a class="struct" href="struct.TypeFunction.html" title="struct syn_solidity::TypeFunction">TypeFunction</a></div><div class="desc docblock-short">A function type: <code>function() returns (string memory)</code></div></li><li><div class="item-name"><a class="struct" href="struct.TypeMapping.html" title="struct syn_solidity::TypeMapping">TypeMapping</a></div><div class="desc docblock-short">A mapping type: <code>mapping(uint key =&gt; string value)</code></div></li><li><div class="item-name"><a class="struct" href="struct.TypeTuple.html" title="struct syn_solidity::TypeTuple">TypeTuple</a></div><div class="desc docblock-short">A tuple type.</div></li><li><div class="item-name"><a class="struct" href="struct.UsingDirective.html" title="struct syn_solidity::UsingDirective">UsingDirective</a></div><div class="desc docblock-short">A <code>using</code> directive: <code>using { A, B.mul as * } for uint256 global;</code></div></li><li><div class="item-name"><a class="struct" href="struct.UsingListItem.html" title="struct syn_solidity::UsingListItem">UsingListItem</a></div></li><li><div class="item-name"><a class="struct" href="struct.VariableAttributes.html" title="struct syn_solidity::VariableAttributes">VariableAttributes</a></div><div class="desc docblock-short">A list of unique variable attributes.</div></li><li><div class="item-name"><a class="struct" href="struct.VariableDeclaration.html" title="struct syn_solidity::VariableDeclaration">VariableDeclaration</a></div><div class="desc docblock-short">A variable declaration.</div></li><li><div class="item-name"><a class="struct" href="struct.VariableDefinition.html" title="struct syn_solidity::VariableDefinition">VariableDefinition</a></div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.FunctionAttribute.html" title="enum syn_solidity::FunctionAttribute">FunctionAttribute</a></div><div class="desc docblock-short">A function attribute.</div></li><li><div class="item-name"><a class="enum" href="enum.ImportPath.html" title="enum syn_solidity::ImportPath">ImportPath</a></div><div class="desc docblock-short">The path of an import directive.</div></li><li><div class="item-name"><a class="enum" href="enum.Item.html" title="enum syn_solidity::Item">Item</a></div><div class="desc docblock-short">An AST item. A more expanded version of a <a href="https://docs.soliditylang.org/en/latest/grammar.html#a4.SolidityParser.sourceUnit">Solidity source unit</a>.</div></li><li><div class="item-name"><a class="enum" href="enum.Mutability.html" title="enum syn_solidity::Mutability">Mutability</a></div><div class="desc docblock-short">A mutability attribute.</div></li><li><div class="item-name"><a class="enum" href="enum.PragmaTokens.html" title="enum syn_solidity::PragmaTokens">PragmaTokens</a></div></li><li><div class="item-name"><a class="enum" href="enum.Storage.html" title="enum syn_solidity::Storage">Storage</a></div><div class="desc docblock-short">A storage location.</div></li><li><div class="item-name"><a class="enum" href="enum.Type.html" title="enum syn_solidity::Type">Type</a></div><div class="desc docblock-short">A type name.</div></li><li><div class="item-name"><a class="enum" href="enum.UserDefinableOperator.html" title="enum syn_solidity::UserDefinableOperator">UserDefinableOperator</a></div><div class="desc docblock-short">A user-definable operator: <code>+</code>, <code>*</code>, <code>|</code>, etc.</div></li><li><div class="item-name"><a class="enum" href="enum.UsingList.html" title="enum syn_solidity::UsingList">UsingList</a></div></li><li><div class="item-name"><a class="enum" href="enum.UsingType.html" title="enum syn_solidity::UsingType">UsingType</a></div></li><li><div class="item-name"><a class="enum" href="enum.VariableAttribute.html" title="enum syn_solidity::VariableAttribute">VariableAttribute</a></div><div class="desc docblock-short">A variable attribute.</div></li><li><div class="item-name"><a class="enum" href="enum.Visibility.html" title="enum syn_solidity::Visibility">Visibility</a></div><div class="desc docblock-short">A visibility attribute.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.parse.html" title="fn syn_solidity::parse">parse</a></div><div class="desc docblock-short">Parse a Solidity <a href="https://doc.rust-lang.org/1.72.0/proc_macro/struct.TokenStream.html" title="struct proc_macro::TokenStream"><code>proc_macro::TokenStream</code></a> into a <a href="struct.File.html" title="struct syn_solidity::File"><code>File</code></a>.</div></li><li><div class="item-name"><a class="fn" href="fn.parse2.html" title="fn syn_solidity::parse2">parse2</a></div><div class="desc docblock-short">Parse a Solidity <a href="../proc_macro2/struct.TokenStream.html" title="struct proc_macro2::TokenStream"><code>proc_macro2::TokenStream</code></a> into a <a href="struct.File.html" title="struct syn_solidity::File"><code>File</code></a>.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.FieldList.html" title="type syn_solidity::FieldList">FieldList</a></div><div class="desc docblock-short">A list of semicolon-separated <a href="struct.VariableDeclaration.html" title="struct syn_solidity::VariableDeclaration">VariableDeclaration</a>s.</div></li><li><div class="item-name"><a class="type" href="type.ParameterList.html" title="type syn_solidity::ParameterList">ParameterList</a></div><div class="desc docblock-short">A list of comma-separated <a href="struct.VariableDeclaration.html" title="struct syn_solidity::VariableDeclaration">VariableDeclaration</a>s.</div></li></ul></section></div></main></body></html>